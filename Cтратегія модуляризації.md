#Architecture

>[!important] Правильна модуляризація
>Важливо зазначити, що не існує єдиної стратегії модуляризації, яка підходить для всіх проектів. Однак існують загальні рекомендації щодо цього.

Приклад модуляризації в додатку [Now In Android](https://github.com/android/nowinandroid).
![[nia-modularization-graph.png]]

Зазвичай, додатки використовують таку структуру модулів:
- `app`: Містить класи рівня додатку і класів каркасу, які зв'язують решту кодової бази. Залежить від усіх функціональних модулів і необхідних основних модулів.
- Функціональні модулі: Специфічні модулі, які призначені для виконання однієї функції в додатку. Можуть бути повторно використані будь-яким додатком. ==Функціональний модуль не залежить від інших функціональних модулів==. Вони залежать лише від основних модулів, які їм потрібні.
- Core модулі: Загальні бібліотечні модулі, що містять допоміжний код і специфічні залежності, які потрібно використовувати спільно з іншими модулями програми. ==Core модуль може залежати від інших core модулів.==
- Інші модулі: Включають такі модулі як `sync`, `benchmark` і `test` модулі.

Така структура зазвичай включає такі модулі:
- `core:data`: Отримання даних програми з декількох джерел.
- `core:designsystem`: Система дизайну, яка включає основні компоненти інтерфейсу , тему додатку та іконки.
- `core:ui`: Компоненти UI та ресурси, що використовуються функціональними модулями. На відміну від модуля системи дизайну, він залежить від рівня даних, оскільки рендерить моделі.
- `core:common`: Спільні класи, що використовуються модулями.
- `core:network`: Створення мережевих запитів та обробка відповідей з віддаленого джерела даних.
- `core:testing`: Тестування залежностей, репозиторіїв та класів утиліт.
- `core:datastore`: Тестування залежностей, репозиторіїв та класів утиліт.
- `core:database`: Локальне сховище баз даних з використанням Room або MongoDB.
- `core:model`: Класи моделей, що використовуються у всьому додатку.

>[!bug] Exception during IR lowering
>Виникає при спробі використовувати Composable функції в новому модулі. Дивіться [[Exception during IR lowering]], щоб отримати рішення.
## Додаткові ресурси
- [Now In Android app](https://github.com/android/nowinandroid)
- [Modularization learning journey](https://github.com/android/nowinandroid/blob/main/docs/ModularizationLearningJourney.md)
- [Common modularization patterns](https://developer.android.com/topic/modularization/patterns)